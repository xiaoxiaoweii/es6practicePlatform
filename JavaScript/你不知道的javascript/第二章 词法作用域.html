<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function foo(a) {
        var b = a * 2; // 4
        function bar(c) {
          console.log(a, b, c); // 2 4 12
        }
        bar(b * 3);
      }
      foo(2);

      function foo2(str, a) {
        eval(str); // 执行字符串中的js
        console.log(a, b); // 1 3
      }
      var b = 2;
      foo2("var b = 3", 1);

      function foo3(str) {
        "use strict"; // 严格模式下 eval有自己的作用域
        eval(str);
        // console.log(a); // ReferenceError: a is not defined
      }
      foo3("var a = 2");

      var obj = { a: 1, b: 2, c: 3 };
      // 单调乏味的重复 "obj"
      obj.a = 2;
      obj.b = 3;
      obj.c = 4;

      // 简单的快捷方式
      with (obj) {
        a = 3;
        b = 4;
        c = 5;
      }
      console.log(obj, `obj`);

      function foo(obj) {
        with (obj) {
          a = 2;
        }
      }
      var o1 = { a: 3 };
      var o2 = { b: 3 };
      foo(o1);
      console.log(o1.a); // 2 
      foo( o2 ); console.log( o2.a ); // undefined 
      console.log( a ); // 2——不好，a 被泄漏到全局作用域上了！

      // 反正with eval() 少用就对了
    </script>
  </body>
</html>
